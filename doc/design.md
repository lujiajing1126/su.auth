# 用户系统

组织分为三类：系统组织、公开组织、内部组织。每个组织的成员都分为四类：管理员、编辑员、普通成员、列席成员。

任何一类成员都可能根据规则被系统冻结权限，权限冻结即相当于权限撤销，唯可根据权限冻结记录（在没有权限撤销记录时），用户申请恢复权限。

组织按照从属关系树状安排。每个组织有组织编号和组织名称，下属组织必须继承所属组织的编号作为开头。比如：“学生会”的编号为“/su”，“学生会信息部”的编号为“/su/info”，而“开发组”的编号为“/su/info/dev”。

有五个基本系统组织：所有人（/sys/all）、内网用户（/sys/campus）、注册用户（/sys/registered）、UIS 用户（/sys/uis）、系统管理员（/sys/admin）。即使没有登录，判定用户组织的程序也总应报告浏览者属于 /sys/all 组织，这只是为了程序方便。无论是否登录，当浏览地址来自内网时，总报告用户属于 /sys/campus 组织。所有注册用户都会被报告属于 /sys/registered 组织。而如果用户名下记录有 UIS 关联信息，则会被报告属于 /sys/uis 用户。而哪些用户是属于 /sys/admin 是硬编码的，没有服务器访问权限不应能够修改 /sys/admin 的成员表。系统组织不接受管理，不应被用户感知，而仅作为程序编写的便利存在。系统资源应当绑定到特殊的系统组织上。而这些系统组织是不可加入的。通过一个令牌领取页面领取令牌后，用户的当前会话会暂时获得相应系统组织的从属关系。

网站提供一个组织目录，所有的公开组织都会在目录中得到显示；系统组织、内部组织则不会。

在用户的个人页面上，该用户可以看到其所属于的公开组织和内部组织；系统组织不会被显示。所有公开组织以其自己的组织名称显示于用户页面，内部组织则会显示为“该内部组织所属的公开组织的名称＋该内部组织所属的所有内部组织的名称＋该内部组织自身的名称”。比如，“学生会信息部”是公开组织，而“开发组”是内部组织，在用户页面上，“开发组”就显示为“学生会信息部开发组”。

成员可能拥有组织的管理权、编辑权、成员权，以代表组织行事。一组织的管理员拥有该组织和该组织所有下属组织的管理权；拥有该组织和该组织所有下属组织的编辑权；拥有该组织和该组织所有所属组织的成员权。编辑员拥有该组织和该组织所有下属组织的编辑权；拥有该组织和该组织所有所属组织的成员权。一组织的普通成员拥有该组织和该组织所有所属组织的成员权。列席成员拥有该组织的成员权。简而言之，下级组织继承上级组织的管理员、编辑员，而上级组织认可下级组织的所有非列席成员为普通成员。

一组织的管理权拥有者可能拥有创建公开组织的权限（由系统管理员授予给该组织）。所有组织的管理权拥有者都可以新建其管理的组织的下属内部组织。所有内部组织的管理权拥有者都可以申请将该内部组织转化为公开组织。拥有创建公开组织的权限的组织的管理权拥有者可以受理下属组织的转公开组织的申请。

一组织的管理权拥有者可能拥有添加普通成员的权限（由系统管理员授予给该组织）。所有组织的管理权拥有者可以向该组织添加列席成员，并申请将其转为普通成员；可以将任意普通成员、编辑员、管理员设置为普通成员、编辑员、管理员。拥有添加普通成员的权限的组织的管理权拥有者可以受理下属组织的转普通成员申请。换一句话说，下级组织管理员不能私自添加非列席成员，因为下级组织的所有非列席成员都会拥有上级组织的成员权。

每个网站内容对象（文件夹、页面、活动、公告）可以设置三个权限表列，分别是：所有者（若干个组织），阅读者（若干个组织），任务编辑（若干个人以及他们的授权期）。

每个网站内容对象的所有者的编辑权拥有者拥有该网站内容对象的所有权和编辑权。每个网站内容对象的所有者、阅读者的成员权拥有者拥有该网站内容对象的阅读权。每个网站内容对象的任务编辑拥有该网站内容对象的的编辑权和阅读权。简而言之，编辑代表所属组织管理页面、任命任务编辑。

网站内容对象的所有权拥有者如果拥有该对象的阅读权则可以任意更改该对象的三个权限表列、可以删除该对象；但是对象的最后一个所有者不能删除自身。网站内容对象的编辑权拥有者如果拥有该对象的阅读权则可以编辑该对象，新建子对象，新建的子对象默认继承父对象的权限表列。网站内容对象的阅读权所有者可以阅读该对象。

用户和 UIS 绑定信息分离，用户可以自行添加、解除、更改绑定关系。一个 UIS 账户最多只能绑定一个网站账户，一个网站账户可以绑定多个 UIS 账户。新用户可以自行注册，也可以在首次 UIS 登录后由系统自动创建。